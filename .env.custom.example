# Sparket Custom Miner Configuration
# Copy this file to .env.custom and configure your settings
#
# Usage:
#   cp .env.custom.example .env.custom
#   # Edit .env.custom with your values
#   pm2 start ecosystem.custom.config.js

# ===== REQUIRED: Wallet Configuration =====
# Your Bittensor wallet name and hotkey
SPARKET_WALLET__NAME=default
SPARKET_WALLET__HOTKEY=default

# ===== REQUIRED: Network Configuration =====
# Sparket subnet netuid (check docs for current value)
SPARKET_NETUID=1

# ===== REQUIRED: Axon Configuration =====
# The axon is how validators communicate with this miner
# Host: 0.0.0.0 = listen on all interfaces
SPARKET_AXON__HOST=0.0.0.0
# Port: default 8094 for miners
SPARKET_AXON__PORT=8094

# If behind NAT or load balancer, set external IP/port
# SPARKET_AXON__EXTERNAL_IP=
# SPARKET_AXON__EXTERNAL_PORT=

# ===== RECOMMENDED: The-Odds-API Key =====
# Get a free key at: https://the-odds-api.com/
# Free tier: 500 requests/month - sufficient for basic operation
# Required for market consensus and sharp book data (Pinnacle weighted 3x)
SPARKET_CUSTOM_MINER__ODDS_API_KEY=

# ===== Model Configuration =====
# Vig (margin) for odds calculation - lower = tighter odds
# Default: 0.045 (4.5%)
SPARKET_CUSTOM_MINER__VIG=0.045

# Engine weights for ensemble model (should sum to ~1.0)
# Elo-driven predictions provide originality edge for InfoDim scoring
# Market weight adds sharp book consensus for accuracy
# Default: elo=0.35, market=0.55, poisson=0.10
# Market-heavy weighting optimizes for EconDim (50% of SkillScore)
SPARKET_CUSTOM_MINER__ENGINE_WEIGHTS__ELO=0.35
SPARKET_CUSTOM_MINER__ENGINE_WEIGHTS__MARKET=0.55
SPARKET_CUSTOM_MINER__ENGINE_WEIGHTS__POISSON=0.10

# ===== Timing Configuration =====
# Submit early for maximum time credit in scoring
# 7+ days before event = 100% time credit
SPARKET_CUSTOM_MINER__TIMING__EARLY_SUBMISSION_DAYS=7

# Maximum refresh interval for distant games (seconds)
# Default: 21600 (6 hours) - used for games >72 hours away
SPARKET_CUSTOM_MINER__TIMING__REFRESH_INTERVAL_SECONDS=21600

# Minimum refresh interval for adaptive timing (seconds)
# Controls the fastest refresh rate for games within 6 hours
# Default: 300 (5 minutes)
SPARKET_CUSTOM_MINER__TIMING__MIN_REFRESH_SECONDS=300

# Minimum hours before event start to submit (matches validator min_minutes=60)
# Default: 1.0
SPARKET_CUSTOM_MINER__TIMING__MIN_HOURS_BEFORE_EVENT=1.0

# Don't submit if less than this many hours before event
# Default: 0.25
SPARKET_CUSTOM_MINER__TIMING__CUTOFF_HOURS=0.25

# ===== Calibration Configuration =====
# Isotonic calibration improves probability accuracy
# Enable/disable calibration adjustments
SPARKET_CUSTOM_MINER__CALIBRATION__ENABLED=true

# Minimum samples before calibration activates
# Lower = faster learning, higher = more stable
SPARKET_CUSTOM_MINER__CALIBRATION__MIN_SAMPLES=100

# How often to retrain calibration (in submissions)
# Default: 500
SPARKET_CUSTOM_MINER__CALIBRATION__RETRAIN_INTERVAL=500

# ===== Batching =====
# Number of markets to batch per submission request
# Default: 50, Range: 1-200
SPARKET_CUSTOM_MINER__BATCH_SIZE=50

# ===== Rate Limiting =====
# Prevent overwhelming validators or API
# Submissions per minute (global)
SPARKET_CUSTOM_MINER__RATE_LIMIT_PER_MINUTE=60

# Submissions per minute per market
SPARKET_CUSTOM_MINER__PER_MARKET_LIMIT_PER_MINUTE=10

# ===== Outcome Detection =====
# How often to check for game outcomes (seconds)
# Used to update Elo ratings and calibration after games resolve
SPARKET_CUSTOM_MINER__OUTCOME_CHECK_SECONDS=300

# ===== Advanced: Subtensor Configuration (Optional) =====
# Uncomment to use custom subtensor endpoint
# SUBTENSOR_NETWORK=finney
# SUBTENSOR_ADDRESS=wss://entrypoint-finney.opentensor.ai:443

# ===== Advanced: Logging (Optional) =====
# Set logging level (DEBUG, INFO, WARNING, ERROR)
# BT_LOGGING_LEVEL=INFO
